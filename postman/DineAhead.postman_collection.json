{
  "info": {
    "name": "DineAhead API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_postman_id": "8a0b8b1c-9c0f-4f03-9c7f-2d8d6a4f1a11",
    "description": "Postman collection for DineAhead Backend API (Firebase Auth + Firestore)."
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      { "key": "token", "value": "{{idToken}}", "type": "string" }
    ]
  },
  "event": [],
  "variable": [
    { "key": "baseUrl", "value": "{{baseUrl}}" }
  ],
  "item": [
    {
      "name": "Health",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "auth": { "type": "noauth" },
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/health", "host": ["{{baseUrl}}"], "path": ["health"] }
          }
        },
        {
          "name": "Welcome",
          "request": {
            "auth": { "type": "noauth" },
            "method": "GET",
            "header": [],
            "url": { "raw": "{{baseUrl}}/", "host": ["{{baseUrl}}"], "path": [""] }
          }
        }
      ]
    },
    {
      "name": "Auth",
      "item": [
        {
          "name": "Register (User or Merchant)",
          "request": {
            "auth": { "type": "noauth" },
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/auth/register", "host": ["{{baseUrl}}"], "path": ["api","auth","register"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"user@example.com\",\n  \"password\": \"User123!\",\n  \"role\": \"user\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\",\n  \"phone\": \"+1234567890\"\n}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const json = pm.response.json();",
                  "if (json.tokens) {",
                  "  pm.environment.set('idToken', json.tokens.idToken);",
                  "  pm.environment.set('refreshToken', json.tokens.refreshToken);",
                  "  pm.environment.set('uid', json.tokens.uid || json.user?.userId);",
                  "}",
                  "pm.environment.set('email', json.user?.email || 'user@example.com');"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Login (Firebase Auth via Backend)",
          "request": {
            "auth": { "type": "noauth" },
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/auth/login", "host": ["{{baseUrl}}"], "path": ["api","auth","login"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"user@example.com\",\n  \"password\": \"User123!\"\n}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const json = pm.response.json();",
                  "if (json.tokens) {",
                  "  pm.environment.set('idToken', json.tokens.idToken);",
                  "  pm.environment.set('refreshToken', json.tokens.refreshToken);",
                  "  pm.environment.set('uid', json.tokens.uid);",
                  "}",
                  "if (json.user) { pm.environment.set('email', json.user.email); }"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Refresh Token",
          "request": {
            "auth": { "type": "noauth" },
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/auth/refresh-token", "host": ["{{baseUrl}}"], "path": ["api","auth","refresh-token"] },
            "body": { "mode": "raw", "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}" }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const json = pm.response.json();",
                  "if (json.idToken) pm.environment.set('idToken', json.idToken);",
                  "if (json.refreshToken) pm.environment.set('refreshToken', json.refreshToken);",
                  "if (json.uid) pm.environment.set('uid', json.uid);"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Logout (optional revoke)",
          "request": {
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/auth/logout", "host": ["{{baseUrl}}"], "path": ["api","auth","logout"] },
            "body": { "mode": "raw", "raw": "{\n  \"uid\": \"{{uid}}\"\n}" }
          }
        }
      ]
    },
    {
      "name": "User",
      "item": [
        {
          "name": "List Restaurants (public)",
          "request": {
            "auth": { "type": "noauth" },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/user/restaurants?cuisine=&priceRange=&search=",
              "host": ["{{baseUrl}}"],
              "path": ["api","user","restaurants"],
              "query": [
                {"key":"cuisine","value":""},
                {"key":"priceRange","value":""},
                {"key":"search","value":""}
              ]
            }
          }
        },
        {
          "name": "Get Restaurant Details (public)",
          "request": {
            "auth": { "type": "noauth" },
            "method": "GET",
            "url": { "raw": "{{baseUrl}}/api/user/restaurants/{{restaurantId}}", "host": ["{{baseUrl}}"], "path": ["api","user","restaurants","{{restaurantId}}"] }
          }
        },
        {
          "name": "Get Restaurant Menu (public)",
          "request": {
            "auth": { "type": "noauth" },
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/user/restaurants/{{restaurantId}}/menu?category=",
              "host": ["{{baseUrl}}"],
              "path": ["api","user","restaurants","{{restaurantId}}","menu"],
              "query": [{"key":"category","value":""}]
            }
          }
        },
        {
          "name": "Check Available Tables",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/user/availability/tables?restaurantId={{restaurantId}}&date={{date}}&partySize=2&duration=120",
              "host": ["{{baseUrl}}"],
              "path": ["api","user","availability","tables"],
              "query": [
                {"key":"restaurantId","value":"{{restaurantId}}"},
                {"key":"date","value":"{{date}}"},
                {"key":"partySize","value":"2"},
                {"key":"duration","value":"120"}
              ]
            }
          }
        },
        {
          "name": "Get Available Time Slots",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/user/availability/time-slots?tableId={{tableId}}&date={{date}}&duration=120",
              "host": ["{{baseUrl}}"],
              "path": ["api","user","availability","time-slots"],
              "query": [
                {"key":"tableId","value":"{{tableId}}"},
                {"key":"date","value":"{{date}}"},
                {"key":"duration","value":"120"}
              ]
            }
          }
        },
        {
          "name": "Create Booking",
          "request": {
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/user/bookings", "host": ["{{baseUrl}}"], "path": ["api","user","bookings"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"restaurantId\": \"{{restaurantId}}\",\n  \"tableId\": \"{{tableId}}\",\n  \"date\": \"{{date}}\",\n  \"time\": \"19:00\",\n  \"duration\": 120,\n  \"partySize\": 2,\n  \"customerInfo\": {\n    \"name\": \"John Doe\",\n    \"phone\": \"+1234567890\",\n    \"email\": \"user@example.com\"\n  },\n  \"specialRequests\": \"birthday celebration\",\n  \"preOrder\": []\n}"
            }
          }
        },
        {
"name": "Get My Bookings",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/user/bookings?upcoming=true",
              "host": ["{{baseUrl}}"],
              "path": ["api","user","bookings"],
              "query": [
                {"key":"upcoming","value":"true"}
              ]
            }
          }
        },
        {
          "name": "Get Booking Details",
          "request": {
            "method": "GET",
            "url": { "raw": "{{baseUrl}}/api/user/bookings/{{bookingId}}", "host": ["{{baseUrl}}"], "path": ["api","user","bookings","{{bookingId}}"] }
          }
        },
        {
          "name": "Cancel Booking",
          "request": {
            "method": "PATCH",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/user/bookings/{{bookingId}}/cancel", "host": ["{{baseUrl}}"], "path": ["api","user","bookings","{{bookingId}}","cancel"] },
            "body": { "mode": "raw", "raw": "{\n  \"reason\": \"Change of plans\"\n}" }
          }
        }
      ]
    },
    {
      "name": "Merchant",
      "item": [
        {
          "name": "Dashboard",
          "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/api/merchant/dashboard", "host": ["{{baseUrl}}"], "path": ["api","merchant","dashboard"] } }
        },
        {
"name": "Create Restaurant Profile",
          "request": {
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/merchant/restaurant", "host": ["{{baseUrl}}"], "path": ["api","merchant","restaurant"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Bella Vista\",\n  \"description\": \"Authentic Italian cuisine\",\n  \"address\": \"123 Main St\",\n  \"phone\": \"+1234567892\",\n  \"email\": \"info@bellavista.com\",\n  \"cuisine\": [\"Italian\"],\n  \"priceRange\": \"mid-range\",\n  \"restaurantType\": \"Fine Dining\",\n  \"coverImage\": \"https://example.com/cover.jpg\",\n  \"socialMedia\": {\n    \"facebookUrl\": \"https://facebook.com/bellavista\",\n    \"instagramUrl\": \"https://instagram.com/bellavista\",\n    \"websiteUrl\": \"https://bellavista.com\"\n  },\n  \"location\": {\n    \"provinceCode\": \"KH-12\",\n    \"districtCode\": \"D-01\",\n    \"latitude\": 11.5564,\n    \"longitude\": 104.9282,\n    \"googleMapsLink\": \"https://maps.google.com/?q=...\"\n  },\n  \"policies\": {\n    \"petFriendly\": false,\n    \"smokingArea\": false,\n    \"outdoorSeating\": true,\n    \"advanceBookingDays\": 30,\n    \"minBookingHours\": 2,\n    \"maxPartySize\": 8,\n    \"allowsCancellation\": true\n  },\n  \"parking\": {\n    \"available\": true,\n    \"feeApplies\": false,\n    \"type\": \"Private Lot\"\n  },\n  \"payment\": {\n    \"cash\": true,\n    \"creditCard\": true,\n    \"mobilePayment\": true\n  },\n  \"deposit\": {\n    \"required\": true,\n    \"percent\": 20\n  },\n  \"cancellation\": {\n    \"allowFreeCancel\": true,\n    \"cancelBeforeHours\": 3\n  },\n  \"rewards\": {\n    \"onShowUp\": true,\n    \"description\": \"Free dessert on show up\"\n  },\n  \"notifications\": {\n    \"bookingAlerts\": true,\n    \"cancellationAlerts\": true\n  }\n}"
            }
          }
        },
        {
          "name": "Get Restaurant Profile",
          "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/api/merchant/restaurant", "host": ["{{baseUrl}}"], "path": ["api","merchant","restaurant"] } }
        },
        {
"name": "Update Restaurant Profile",
          "request": {
            "method": "PUT",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/merchant/restaurant", "host": ["{{baseUrl}}"], "path": ["api","merchant","restaurant"] },
            "body": { "mode": "raw", "raw": "{\n  \"name\": \"Bella Vista Updated\",\n  \"description\": \"Updated description\",\n  \"address\": \"123 Main St\",\n  \"phone\": \"+1234567892\",\n  \"email\": \"info@bellavista.com\",\n  \"cuisine\": [\"Italian\"],\n  \"priceRange\": \"mid-range\",\n  \"restaurantType\": \"Fine Dining\",\n  \"coverImage\": \"https://example.com/cover2.jpg\",\n  \"payment\": { \"cash\": true, \"creditCard\": true, \"mobilePayment\": false },\n  \"notifications\": { \"bookingAlerts\": true, \"cancellationAlerts\": false }\n}" }
          }
        },
        {
          "name": "Update Business Hours",
          "request": {
            "method": "PUT",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/merchant/restaurant/business-hours", "host": ["{{baseUrl}}"], "path": ["api","merchant","restaurant","business-hours"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"businessHours\": {\n    \"monday\": { \"open\": \"09:00\", \"close\": \"22:00\", \"isOpen\": true },\n    \"tuesday\": { \"open\": \"09:00\", \"close\": \"22:00\", \"isOpen\": true }\n  }\n}"
            }
          }
        },
        {
"name": "Create Table",
          "request": {
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/merchant/tables", "host": ["{{baseUrl}}"], "path": ["api","merchant","tables"] },
            "body": { "mode": "raw", "raw": "{\n  \"tableNumber\": \"T01\",\n  \"capacity\": 4,\n  \"location\": \"indoor\",\n  \"amenities\": [\"window-view\"],\n  \"minBookingDuration\": 90,\n  \"maxBookingDuration\": 180,\n  \"minSpending\": 0\n}" }
          }
        },
        {
          "name": "Get Tables",
          "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/api/merchant/tables", "host": ["{{baseUrl}}"], "path": ["api","merchant","tables"] } }
        },
        {
          "name": "Update Table",
          "request": {
            "method": "PUT",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/merchant/tables/{{tableId}}", "host": ["{{baseUrl}}"], "path": ["api","merchant","tables","{{tableId}}"] },
            "body": { "mode": "raw", "raw": "{\n  \"capacity\": 6,\n  \"location\": \"indoor\"\n}" }
          }
        },
        {
          "name": "Delete Table",
          "request": { "method": "DELETE", "url": { "raw": "{{baseUrl}}/api/merchant/tables/{{tableId}}", "host": ["{{baseUrl}}"], "path": ["api","merchant","tables","{{tableId}}"] } }
        },
        {
          "name": "Create Menu Item",
          "request": {
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/merchant/menu", "host": ["{{baseUrl}}"], "path": ["api","merchant","menu"] },
            "body": { "mode": "raw", "raw": "{\n  \"name\": \"Margherita Pizza\",\n  \"description\": \"Classic pizza\",\n  \"price\": 18.99,\n  \"category\": \"main\"\n}" }
          }
        },
        {
          "name": "Get Menu Items",
          "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/api/merchant/menu", "host": ["{{baseUrl}}"], "path": ["api","merchant","menu"] } }
        },
        {
          "name": "Update Menu Item",
          "request": {
            "method": "PUT",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/merchant/menu/{{menuItemId}}", "host": ["{{baseUrl}}"], "path": ["api","merchant","menu","{{menuItemId}}"] },
            "body": { "mode": "raw", "raw": "{\n  \"price\": 19.99,\n  \"isAvailable\": true\n}" }
          }
        },
        {
          "name": "Delete Menu Item",
          "request": { "method": "DELETE", "url": { "raw": "{{baseUrl}}/api/merchant/menu/{{menuItemId}}", "host": ["{{baseUrl}}"], "path": ["api","merchant","menu","{{menuItemId}}"] } }
        },
        {
          "name": "Toggle Menu Item Availability",
          "request": {
            "method": "PATCH",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/merchant/menu/{{menuItemId}}/availability", "host": ["{{baseUrl}}"], "path": ["api","merchant","menu","{{menuItemId}}","availability"] },
            "body": { "mode": "raw", "raw": "{\n  \"isAvailable\": false\n}" }
          }
        }
      ]
    },
    {
      "name": "Bookings (Merchant Management)",
      "item": [
        {
          "name": "Calendar (month summary)",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/bookings/calendar?month=2025-10",
              "host": ["{{baseUrl}}"],
              "path": ["api","bookings","calendar"],
              "query": [{"key":"month","value":"2025-10"}]
            }
          }
        },
        {
          "name": "Stats",
          "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/api/bookings/stats", "host": ["{{baseUrl}}"], "path": ["api","bookings","stats"] } }
        },
        {
"name": "List Bookings",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/bookings?upcoming=true",
              "host": ["{{baseUrl}}"],
              "path": ["api","bookings"],
              "query": [
                {"key":"upcoming","value":"true"}
              ]
            }
          }
        },
        {
          "name": "Get Booking Details (merchant)",
          "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/api/bookings/{{bookingId}}", "host": ["{{baseUrl}}"], "path": ["api","bookings","{{bookingId}}"] } }
        },
        {
          "name": "Accept Booking",
          "request": {
            "method": "PATCH",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/bookings/{{bookingId}}/accept", "host": ["{{baseUrl}}"], "path": ["api","bookings","{{bookingId}}","accept"] },
            "body": { "mode": "raw", "raw": "{\n  \"merchantNotes\": \"See you soon\"\n}" }
          }
        },
        {
          "name": "Reject Booking",
          "request": {
            "method": "PATCH",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/bookings/{{bookingId}}/reject", "host": ["{{baseUrl}}"], "path": ["api","bookings","{{bookingId}}","reject"] },
            "body": { "mode": "raw", "raw": "{\n  \"reason\": \"We are full\",\n  \"merchantNotes\": \"Try earlier\"\n}" }
          }
        },
        {
          "name": "Update Booking",
          "request": {
            "method": "PUT",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/bookings/{{bookingId}}", "host": ["{{baseUrl}}"], "path": ["api","bookings","{{bookingId}}"] },
            "body": { "mode": "raw", "raw": "{\n  \"time\": \"20:00\",\n  \"merchantNotes\": \"Updated time\"\n}" }
          }
        },
        {
          "name": "Cancel Booking (merchant)",
          "request": {
            "method": "PATCH",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/bookings/{{bookingId}}/cancel", "host": ["{{baseUrl}}"], "path": ["api","bookings","{{bookingId}}","cancel"] },
            "body": { "mode": "raw", "raw": "{\n  \"reason\": \"Unexpected closure\"\n}" }
          }
        },
        {
          "name": "Complete Booking",
          "request": {
            "method": "PATCH",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/bookings/{{bookingId}}/complete", "host": ["{{baseUrl}}"], "path": ["api","bookings","{{bookingId}}","complete"] },
            "body": { "mode": "raw", "raw": "{\n  \"paymentStatus\": \"paid\"\n}" }
          }
        },
        {
          "name": "Mark No-Show",
          "request": { "method": "PATCH", "header": [ { "key": "Content-Type", "value": "application/json" } ], "url": { "raw": "{{baseUrl}}/api/bookings/{{bookingId}}/no-show", "host": ["{{baseUrl}}"], "path": ["api","bookings","{{bookingId}}","no-show"] }, "body": { "mode": "raw", "raw": "{\n  \"merchantNotes\": \"Customer did not arrive\"\n}" } }
        }
      ]
    }
  ]
}
