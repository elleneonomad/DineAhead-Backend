{
  "info": {
    "name": "DineAhead - Image Uploads",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_postman_id": "upload-images-collection-001",
    "description": "Image upload endpoints for DineAhead. Upload restaurant profile pictures, menu item images, and table images to Firebase Storage. All endpoints require merchant authentication."
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      { "key": "token", "value": "{{merchantToken}}", "type": "string" }
    ]
  },
  "variable": [
    { "key": "baseUrl", "value": "http://localhost:3000" },
    { "key": "merchantToken", "value": "YOUR_MERCHANT_JWT_TOKEN_HERE" },
    { "key": "restaurantId", "value": "RESTAURANT_ID" },
    { "key": "menuItemId", "value": "MENU_ITEM_ID" },
    { "key": "tableId", "value": "TABLE_ID" }
  ],
  "item": [
    {
      "name": "Restaurant Images",
      "item": [
        {
          "name": "Upload Restaurant Profile Picture",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "image",
                  "type": "file",
                  "src": "",
                  "description": "Select an image file (JPEG, PNG, GIF, WebP). Max size: 5MB"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/upload/restaurant/profile",
              "host": ["{{baseUrl}}"],
              "path": ["api", "upload", "restaurant", "profile"]
            },
            "description": "Upload or replace the restaurant's profile/cover picture. The image is stored in Firebase Storage and the URL is saved to the restaurant's coverImage field.\n\n**Requirements:**\n- Merchant authentication required\n- Single image file (field name: 'image')\n- Supported formats: JPEG, PNG, GIF, WebP\n- Max file size: 5MB\n- Old profile picture will be automatically deleted"
          },
          "response": [
            {
              "name": "200 - Success",
              "originalRequest": {
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "formdata",
                  "formdata": [
                    { "key": "image", "type": "file", "src": "" }
                  ]
                },
                "url": {
                  "raw": "{{baseUrl}}/api/upload/restaurant/profile",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "upload", "restaurant", "profile"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [{"key": "Content-Type", "value": "application/json"}],
              "body": "{\n  \"success\": true,\n  \"message\": \"Restaurant profile picture uploaded successfully\",\n  \"data\": {\n    \"imageUrl\": \"https://storage.googleapis.com/chat-flutter-a10ed.firebasestorage.app/restaurants/profile/restaurant-profile-1696428000000.jpg\",\n    \"restaurant\": {\n      \"id\": \"rest_123\",\n      \"name\": \"Bella Vista Restaurant\",\n      \"coverImage\": \"https://storage.googleapis.com/chat-flutter-a10ed.firebasestorage.app/restaurants/profile/restaurant-profile-1696428000000.jpg\",\n      \"merchantId\": \"merchant_uid_123\",\n      \"address\": \"123 Main Street\",\n      \"updatedAt\": \"2025-10-04T16:30:00.000Z\"\n    }\n  }\n}"
            },
            {
              "name": "400 - No File Provided",
              "status": "Bad Request",
              "code": 400,
              "_postman_previewlanguage": "json",
              "header": [{"key": "Content-Type", "value": "application/json"}],
              "body": "{\n  \"success\": false,\n  \"error\": \"No image file provided\"\n}"
            },
            {
              "name": "400 - Invalid File Type",
              "status": "Bad Request",
              "code": 400,
              "_postman_previewlanguage": "json",
              "header": [{"key": "Content-Type", "value": "application/json"}],
              "body": "{\n  \"success\": false,\n  \"error\": \"Invalid file type. Only JPEG, PNG, GIF, and WebP images are allowed.\"\n}"
            },
            {
              "name": "400 - File Too Large",
              "status": "Bad Request",
              "code": 400,
              "_postman_previewlanguage": "json",
              "header": [{"key": "Content-Type", "value": "application/json"}],
              "body": "{\n  \"success\": false,\n  \"error\": \"File size too large. Maximum file size is 5MB.\"\n}"
            }
          ]
        },
        {
          "name": "Upload Restaurant Gallery Images",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "images",
                  "type": "file",
                  "src": "",
                  "description": "Select up to 10 image files"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/upload/restaurant/gallery",
              "host": ["{{baseUrl}}"],
              "path": ["api", "upload", "restaurant", "gallery"]
            },
            "description": "Upload multiple images to the restaurant's gallery. Images are added to the existing gallery (not replaced).\n\n**Requirements:**\n- Merchant authentication required\n- Multiple image files (field name: 'images')\n- Max 10 images per request\n- Supported formats: JPEG, PNG, GIF, WebP\n- Max file size per image: 5MB"
          },
          "response": [
            {
              "name": "200 - Success",
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [{"key": "Content-Type", "value": "application/json"}],
              "body": "{\n  \"success\": true,\n  \"message\": \"Restaurant gallery images uploaded successfully\",\n  \"data\": {\n    \"imageUrls\": [\n      \"https://storage.googleapis.com/chat-flutter-a10ed.firebasestorage.app/restaurants/gallery/gallery-1-1696428000000.jpg\",\n      \"https://storage.googleapis.com/chat-flutter-a10ed.firebasestorage.app/restaurants/gallery/gallery-2-1696428001000.jpg\",\n      \"https://storage.googleapis.com/chat-flutter-a10ed.firebasestorage.app/restaurants/gallery/gallery-3-1696428002000.jpg\"\n    ],\n    \"restaurant\": {\n      \"id\": \"rest_123\",\n      \"name\": \"Bella Vista Restaurant\",\n      \"images\": [\n        \"https://storage.googleapis.com/chat-flutter-a10ed.firebasestorage.app/restaurants/gallery/existing-1.jpg\",\n        \"https://storage.googleapis.com/chat-flutter-a10ed.firebasestorage.app/restaurants/gallery/gallery-1-1696428000000.jpg\",\n        \"https://storage.googleapis.com/chat-flutter-a10ed.firebasestorage.app/restaurants/gallery/gallery-2-1696428001000.jpg\",\n        \"https://storage.googleapis.com/chat-flutter-a10ed.firebasestorage.app/restaurants/gallery/gallery-3-1696428002000.jpg\"\n      ],\n      \"updatedAt\": \"2025-10-04T16:30:00.000Z\"\n    }\n  }\n}"
            }
          ]
        },
        {
          "name": "Delete Restaurant Gallery Image",
          "request": {
            "method": "DELETE",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"imageUrl\": \"https://storage.googleapis.com/chat-flutter-a10ed.firebasestorage.app/restaurants/gallery/gallery-1-1696428000000.jpg\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/upload/restaurant/gallery",
              "host": ["{{baseUrl}}"],
              "path": ["api", "upload", "restaurant", "gallery"]
            },
            "description": "Delete a specific image from the restaurant's gallery.\n\n**Requirements:**\n- Merchant authentication required\n- Image URL must exist in restaurant's images array\n- Image will be deleted from Firebase Storage and removed from database"
          },
          "response": [
            {
              "name": "200 - Success",
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [{"key": "Content-Type", "value": "application/json"}],
              "body": "{\n  \"success\": true,\n  \"message\": \"Restaurant gallery image deleted successfully\",\n  \"data\": {\n    \"restaurant\": {\n      \"id\": \"rest_123\",\n      \"name\": \"Bella Vista Restaurant\",\n      \"images\": [\n        \"https://storage.googleapis.com/chat-flutter-a10ed.firebasestorage.app/restaurants/gallery/existing-1.jpg\",\n        \"https://storage.googleapis.com/chat-flutter-a10ed.firebasestorage.app/restaurants/gallery/gallery-2-1696428001000.jpg\"\n      ],\n      \"updatedAt\": \"2025-10-04T16:32:00.000Z\"\n    }\n  }\n}"
            },
            {
              "name": "404 - Image Not Found",
              "status": "Not Found",
              "code": 404,
              "_postman_previewlanguage": "json",
              "header": [{"key": "Content-Type", "value": "application/json"}],
              "body": "{\n  \"success\": false,\n  \"error\": \"Image not found in restaurant gallery\"\n}"
            }
          ]
        }
      ]
    },
    {
      "name": "Menu Item Images",
      "item": [
        {
          "name": "Upload Menu Item Image",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "image",
                  "type": "file",
                  "src": "",
                  "description": "Select an image file for the menu item"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/upload/menu-item/{{menuItemId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "upload", "menu-item", "{{menuItemId}}"]
            },
            "description": "Upload an image for a specific menu item. The image replaces any existing menu item images.\n\n**Requirements:**\n- Merchant authentication required\n- Merchant must own the restaurant that owns the menu item\n- Single image file (field name: 'image')\n- Supported formats: JPEG, PNG, GIF, WebP\n- Max file size: 5MB\n- Old menu item images will be automatically deleted"
          },
          "response": [
            {
              "name": "200 - Success",
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [{"key": "Content-Type", "value": "application/json"}],
              "body": "{\n  \"success\": true,\n  \"message\": \"Menu item image uploaded successfully\",\n  \"data\": {\n    \"imageUrl\": \"https://storage.googleapis.com/chat-flutter-a10ed.firebasestorage.app/menu-items/margherita-pizza-1696428000000.jpg\",\n    \"menuItem\": {\n      \"id\": \"menu_456\",\n      \"restaurantId\": \"rest_123\",\n      \"name\": \"Margherita Pizza\",\n      \"description\": \"Classic pizza with fresh mozzarella and basil\",\n      \"price\": 18.99,\n      \"category\": \"main\",\n      \"images\": [\n        \"https://storage.googleapis.com/chat-flutter-a10ed.firebasestorage.app/menu-items/margherita-pizza-1696428000000.jpg\"\n      ],\n      \"isAvailable\": true,\n      \"updatedAt\": \"2025-10-04T16:35:00.000Z\"\n    }\n  }\n}"
            },
            {
              "name": "403 - Forbidden",
              "status": "Forbidden",
              "code": 403,
              "_postman_previewlanguage": "json",
              "header": [{"key": "Content-Type", "value": "application/json"}],
              "body": "{\n  \"success\": false,\n  \"error\": \"You do not have permission to update this menu item\"\n}"
            },
            {
              "name": "404 - Menu Item Not Found",
              "status": "Not Found",
              "code": 404,
              "_postman_previewlanguage": "json",
              "header": [{"key": "Content-Type", "value": "application/json"}],
              "body": "{\n  \"success\": false,\n  \"error\": \"Menu item not found\"\n}"
            }
          ]
        }
      ]
    },
    {
      "name": "Table Images",
      "item": [
        {
          "name": "Upload Table Image",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "image",
                  "type": "file",
                  "src": "",
                  "description": "Select an image file for the table"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/upload/table/{{tableId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "upload", "table", "{{tableId}}"]
            },
            "description": "Upload an image for a specific table. The image replaces any existing table image.\n\n**Requirements:**\n- Merchant authentication required\n- Merchant must own the restaurant that owns the table\n- Single image file (field name: 'image')\n- Supported formats: JPEG, PNG, GIF, WebP\n- Max file size: 5MB\n- Old table image will be automatically deleted"
          },
          "response": [
            {
              "name": "200 - Success",
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [{"key": "Content-Type", "value": "application/json"}],
              "body": "{\n  \"success\": true,\n  \"message\": \"Table image uploaded successfully\",\n  \"data\": {\n    \"imageUrl\": \"https://storage.googleapis.com/chat-flutter-a10ed.firebasestorage.app/tables/table-t01-1696428000000.jpg\",\n    \"table\": {\n      \"id\": \"table_789\",\n      \"restaurantId\": \"rest_123\",\n      \"tableNumber\": \"T01\",\n      \"capacity\": 4,\n      \"location\": \"indoor\",\n      \"amenities\": [\"window-view\", \"wheelchair-accessible\"],\n      \"image\": \"https://storage.googleapis.com/chat-flutter-a10ed.firebasestorage.app/tables/table-t01-1696428000000.jpg\",\n      \"minBookingDuration\": 90,\n      \"maxBookingDuration\": 180,\n      \"minSpending\": 50,\n      \"isActive\": true,\n      \"updatedAt\": \"2025-10-04T16:40:00.000Z\"\n    }\n  }\n}"
            },
            {
              "name": "403 - Forbidden",
              "status": "Forbidden",
              "code": 403,
              "_postman_previewlanguage": "json",
              "header": [{"key": "Content-Type", "value": "application/json"}],
              "body": "{\n  \"success\": false,\n  \"error\": \"You do not have permission to update this table\"\n}"
            },
            {
              "name": "404 - Table Not Found",
              "status": "Not Found",
              "code": 404,
              "_postman_previewlanguage": "json",
              "header": [{"key": "Content-Type", "value": "application/json"}],
              "body": "{\n  \"success\": false,\n  \"error\": \"Table not found\"\n}"
            }
          ]
        }
      ]
    }
  ]
}
